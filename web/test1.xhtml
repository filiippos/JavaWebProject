<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <meta charset="utf-8">
            </meta>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
        </meta>
    <meta name="viewport" content="width=device-width, initial-scale=1">
        </meta>
    <meta name="description" content="">
        </meta>
    <meta name="author" content="">
    </meta>
        <meta content="text/html;charset=UTF-8" />
        <link rel="shortcut icon" href="logo.png" />
        <title>Maths' E- Class - Beginners Quiz</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        
         <!-- Bootstrap Core CSS - Uses Bootswatch Flatly Theme: http://bootswatch.com/flatly/ -->
          <link href="bootstrap.css" rel="stylesheet"></link>
          <link href="font-awesome.css" rel="stylesheet"></link>
          <link href="font-awesome.css" rel="stylesheet"></link>
 <link href="freelancer.css" rel="stylesheet"></link>
    <!-- Custom CSS -->

    <!-- Custom Fonts -->
    <link href="font-awesome.min.css" rel="stylesheet" type="text/css"></link>
      <link href="font-awesome.css" rel="stylesheet" type="text/css"></link>
       <link href="quizcss.css" rel="stylesheet" type="text/css"></link>
      
    <link href="http://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"></link>
    <link href="http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css"></link>
    <!-- Latest compiled and minified JavaScript -->
    
    </h:head>
   <h:body id="page-top" class="index">

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#page-top">Welcome to the Math's Class</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li class="hidden">
                        <a href="#page-top"></a>
                    </li>
                    <li class="page-scroll">
                        <a href=""> #{login.firstname} </a>
                    </li>
                     <li class="page-scroll">
                        <a href="home.jsf">Home Page</a>
                    </li>
                    <li class="page-scroll">
                       <a href="#{login.logout()}">Logout</a>
                    </li>
                    
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
        
        
    </nav>
   
    
    <br></br>
    <section id="portfolio">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2>Beginners Quiz</h2>
                    <hr class="star-primary"></hr>
                </div>
            </div>
            <br></br><br></br>
              <div class="quizContainer">
         <h1>Beginners' Quiz</h1>

        <div class="question"></div>
        <ul class="choiceList"></ul>
        <div class="hintMessage"></div>
        <div class="hintButton"></div>
        <div class="quizMessage"></div>
        <div class="result"></div>
        <div class="nextButton">Next Question</div><br></br>
        <div class="errorwarning"></div>
        <h:form id='quiz1form'>
             <h:inputHidden id="txtProperty" > </h:inputHidden> <!-- no binding here, hidden pedio  -->
             <h4><strong>Correct Answers</strong></h4>
            <input type="text" id="correctAnswersfield" name="correctAnswersfield" readonly="readonly"  > </input><!-- pedio input text mono readonly gia na min mporei na peiraxtei apo ton xristi kai na katagrafei ta correctAnswers prokeimenou na kserei o mathitis p ekane lathos kai  na stelnetai apo ti forma stin java klassi stin ousia i metavliti correctAnswers-->
     <!--    <h:inputHidden id="correctAnswersfield" value="#{quiz.correctAnswers}" /> -->
            <div>  <p:commandButton class='endButton' value='End Quiz' action ="#{quiz.quiz1()}" />
             <p:commandButton class='hintButton' value='Hint'/></div>
        
    
       
        </h:form>
        
  
<!--<button id="btn1">Hint</button> -->
        <br></br>
    </div>


    



            
        </div>
    </section>
     
       <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript">
     /**
 * Created with JetBrains WebStorm.
 * User: pwanwu
 * Date: 18/09/2013
 * Time: 17:41
 * To change this template use File | Settings | File Templates.
 * 
 * 
 
 */
//<![CDATA[




var questions = [{ //pinakas me erwtisi,epiloges kai swsti apantisi 5 thesewn
    question: "Πως αλλιώς διαβάζεται η δεύτερη  δύναμη ενός φυσικού αριθμού α",
    choices: ["α", "α^2", "αν2", "ν^2"],
    correctAnswer: 1
}, {
    question: "Ποσο κάνει 27*14?",
    choices: ["485", "408", "378", "528"],
    correctAnswer: 2
}, {
    question: "Τι ονομάζεται αριθμητική παράσταση?",
    choices: ["Μια παράσταση που περιέχει πολλαπλασιασμούς και προσθέσεις", "Μια παράσταση που περιέχει πράξεις με αριθμούς", "Μια παράσταση που περιέχει πολλαπλασιασμούς και διαιρέσεις", "Μια παράσταση που περιέχει μόνο προσθέσεις και αφαιρέσεις "],
    correctAnswer: 1
}, {
    question: "Η ευκλείδια διαίρεση μας δίνει τον εξής τύπο : Δ = δ*π + υ υ<δ. Τι συμβολίζει το Δ ? ",
    choices: ["Διαιρετέος ", "Διαιρέτης", "Πηλίκο", "Υπόλοιπο"],
    correctAnswer: 0
}, {
    question: "Η ευκλείδια διαίρεση μας δίνει τον εξής τύπο : Δ = δ*π + υ υ<δ. Τι συμβολίζει το υ ?",
    choices: ["Υπόλοιπο", "Διαιρετέο", "Διαιρέτη", "Πηλίκο"],
    correctAnswer: 0
    }, {
    question: "4+5x10-4  = ?",
    choices: ["50", "86", "34", "58"],
    correctAnswer: 0
     }, {
    question: "15-10+15x0/2  = ?",
    choices: ["0", "100", "25", "5"],
    correctAnswer: 3
}];

var currentQuestion = 0;
var correctAnswers = 0;
var quizOver = false;
var questionnumber = 0;
var hint =[7];
hint[0]="η δεύτερη δύναμη ενός αριθμού α, λέγεται και α στο τετράγωνο";
hint[1]="σειρά πραξεων 1)4x7 2)2x4+2 κτλπ.";
hint[2]="ενα παράδειγμα αριθμιτικής παράστασης (2+4-1x4)/2";
hint[3]="Δ είναι ο αριθμός που Διαιρείται";
hint[4]="Δ ο αριθμός που δαιρείται και δ ο αριθμός που τον διαιρεί ";
hint[5]="Προσοχή στην προτεραιότητα των πράξεων";
hint[6]="Προσοχή στην προτεραιότητα των πράξεων";




var limit = 6,
    amount = 7,
    lower_bound = 0,
    upper_bound = 6,
    unique_random_numbers = [];

if (amount > limit) limit = amount; //Infinite loop if you want more unique
                                    //Natural numbers than existemt in a
                                    // given range
while (unique_random_numbers.length < limit) {
    var random_number = Math.round(Math.random()*(upper_bound - lower_bound) + lower_bound);
    if (unique_random_numbers.indexOf(random_number) == -1) { 
        // Yay! new random number
        unique_random_numbers.push( random_number );
    }
}









$(document).ready(function () {


    // Display the first question
    displayCurrentQuestion();//kaleitai i sunartisi opou emfanizei tis erwtiseis sumfwna me ton metriti currentQuestion p ksekinaei me 0
    $(this).find(".endButton").hide();//kruvoume to endButton gia na to emfanisoume sto telos
    $(this).find(".quizMessage").hide(1000);//kruvei to quizMessage me kathusterisi 1 sec
    
     var levelOfStudent1 =("#{checker.levelOfStudent()}");
    //alert(levelOfStudent1);
    if (levelOfStudent1 ==="advanced"){
        $(this).find(".hintButton").hide();
    }
    $(this).find(".hintMessage").hide(1000);
    
     $(this).find(".hintButton").on("click",function(){
       
       $(document).find(".hintMessage").text(hint[unique_random_numbers[currentQuestion]]);
                $(document).find(".hintMessage").show(1000);
       //alert(hint[unique_random_numbers[currentQuestion]]);
   });

    // On clicking next, display the next question
    //me to pou patisoume click sto next question koumpi me klassi nextButton ginetai elegxos an to quizOver boolean metavliti einai false, an einai psevdes dld to quiz dn exei oloklirwthei elegxoume an o xristis
    //epelekse kapoia pithani apantisi , dinwntas sto value value = $("input[type='radio']:checked").val();
//an to value einai undefined emfanizetai minima sto xristi na epileksei apantisi , alliws krivei to proigoumeno minima kai elegxei an einai swsti i lathos i apantisi, an einai swsti t dinei ponto
//epeita megalwnei o metritis correntAnswers kai elegxetai an to currentQuestion exei kseperasei to questions.length,ean oxi kaleitai i sunartisi displayCurrentQuestion,alliws emfanizetai to score mesw tis displayScore
    $(this).find(".nextButton").on("click", function () {
        
         $(this).find("#correctAnswersfield").val(correctAnswers);//katagrafi sto readonly input text twn swstwn erwtisewn prokeimenou na tis steilei pisw stin java klassi
        if (!quizOver) {

            value = $("input[type='radio']:checked").val();

            if (value == undefined) {
                $(document).find(".quizMessage").text("Please select an answer");
                $(document).find(".quizMessage").show(1000);
            } else {
                questionnumber = questions[unique_random_numbers[currentQuestion]].correctAnswer +1;
                // TODO: Remove any message -> not sure if this is efficient to call this each time....
                $(document).find(".quizMessage").hide(1000);
                $(document).find(".hintMessage").hide(1000);

                if (value == questions[unique_random_numbers[currentQuestion]].correctAnswer) {
                    correctAnswers++;
                }
                else {
                  $(document).find(".quizContainer > .errorwarning").text("Wrong answer :/, Correct answer was  "+questionnumber+"").show();
                  $(document).find(".quizContainer > .errorwarning").delay(2500).hide(1000);
                 //   $(document).find(".quizContainer > .errorwarning").text("Wrong answer :/"" ").hide(1000);
                }

                currentQuestion++; // Since we have already displayed the first question on DOM ready
                if (currentQuestion < questions.length) {
                    $(this).find("#correctAnswersfield").val(correctAnswers);
                    displayCurrentQuestion();
                } else {
                    displayScore();
                    //                    $(document).find(".nextButton").toggle();
                    //                    $(document).find(".playAgainButton").toggle();
                    // Change the text in the next button to ask if user wants to play again
                    $(this).find("#correctAnswersfield").val(correctAnswers);//show correctAnswers
                    $(document).find(".nextButton").text("Play Again?");
                     $(this).find(".hintButton").hide();
                    quizOver = true;
                }
            }
        } else { // quiz is over and clicked the next button (which now displays 'Play Again?'
            quizOver = false;
            $(document).find(".nextButton").text("Next Question");
            
            resetQuiz();
            displayCurrentQuestion();
            hideScore(1000);
        }
    });

});

// This displays the current question AND the choices
function displayCurrentQuestion() {
   
    console.log("In display current Question");
    $("#correctAnswersfield").val(correctAnswers); 
    var question = questions[unique_random_numbers[currentQuestion]].question; //to question pairnei tin timi question apo ton pinaka questions gia ti thesi opou exei o metritis 
    var questionClass = $(document).find(".quizContainer > .question");//apothikevoume sti metavliti questionClass apo tin klassi tou quiz quizContainer ---> question
    var choiceList = $(document).find(".quizContainer > .choiceList");//to idio gia to choicelist
    var numChoices = questions[unique_random_numbers[currentQuestion]].choices.length;//apothikevoume sti metavliti numChoices ton arithmo twn epilogwn legontas na parei apo ton pinaka questions sti thesi p einai o metritis ti stili choices kai megethos tis

    // Set the questionClass text to the current question
    $(questionClass).text(question);//sto questionclass vazoume keimeno to opoio einai to keimeno tis trexousas erwtisis question opws eipame k prin

    // Remove all current <li> elements (if any)
    $(choiceList).find("li").remove();//apo tis epiloges an exei meinei kapoio li to svinoume

    var choice;//gia kathe pithani apantisi gename ena radio button to opoio periexei tin epilogi se keimeno 
    for (i = 0; i < numChoices; i++) {
        choice = questions[unique_random_numbers[currentQuestion]].choices[i];//dinoume se kathe epanalipsi sti metavliti choice apo ti thesi tou pinaka questions gia tin thesi currentQuestion tin antistoixi i epilogi choices[i[
        $('<li><input type="radio" value=' + i + ' name="dynradio" />' + choice + '</li>').appendTo(choiceList);
    }
}

function resetQuiz() {
    currentQuestion = 0;
    correctAnswers = 0;
      $(document).find(".endButton").hide();
     $(document).find(".hintButton").show();
    hideScore(1000);
}
function displayScore() {
    if(correctAnswers==questions.length)
    {
        $(document).find(".quizContainer > .result").text("You got them all right dude :) "+correctAnswers+"/"+questions.length+" ");
        $(document).find(".endButton").show(2000);
        $(document).find(".hintButton").hide();
        $(document).find(".nextButton").hide();
        
    //   #{quiz.correctAnswers} = correctAnswers;
      //  #{quiz.quiestionslength} = questions.length;           
        var parsed_data = JSON.parse(correctAnswers);
        var parsed_data2 = JSON.parse(questions.length);
        console.log(parsed_data);
        $("#correctAnswersfield").val(correctAnswers); 
        console.log("arithmos" +correctAnswers);
    }
    else if(correctAnswers ==0)
    {
         $(document).find(".quizContainer > .result").text("Very Bad , 0/"+questions.length+" :(");
         $(document).find(".endButton").show(2000);
         $(document).find(".hintButton").hide();
        var parsed_data = JSON.parse(correctAnswers);
        var parsed_data2 = JSON.parse(questions.length);
        console.log(parsed_data);
   //     #{quiz.correctAnswers} = correctAnswers;
     //   #{quiz.quiestionslength} = questions.length;   
    }
    else
    {
    $(document).find(".quizContainer > .result").text("You scored: " + correctAnswers + " out of: " + questions.length);
    $(document).find(".quizContainer > .result").show();
    $(document).find(".endButton").text("End Quiz").show(2000);
    $(document).find(".hintButton").hide();
        var parsed_data = JSON.parse(correctAnswers);
        var parsed_data2 = JSON.parse(questions.length);
        console.log(parsed_data); 
        console.log(parsed_data2);
       // #{quiz.quiestionslength}=parsed_data2;
       // '#{quiz.correctAnswers}' = correctAnswers;
      //  '#{quiz.quiestionslength}' = questions.length;   
            console.log(#{quiz.quiestionslength});
    }
}

function hideScore() {
    $(document).find(".result").hide(1000);
}

//]]>

//laceTd.click(function() {
  //  var jsonObj= { jsonObj: [ {"rowID": $(nRow).attr('id')}  ]};                                    
    //$.ajax({
     //   data: JSON.stringify(jsonObj),
     //   contentType: "application/json; charset=utf-8",
   //     traditional: true,
    //    url: "quizBean"
  //  });
//});
</script>

      
   </h:body>
</html>